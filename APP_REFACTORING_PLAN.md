# ğŸ”§ app.py åˆ†å‰²ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°è¨ˆç”»

**ä½œæˆæ—¥**: 2025å¹´11æœˆ26æ—¥  
**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**: `app.py` (3,086è¡Œ)  
**ç›®æ¨™**: ãƒ¢ãƒãƒªã‚·ãƒƒã‚¯æ§‹é€ ã‚’ä¿å®ˆæ€§ãƒ»æ‹¡å¼µæ€§ã®é«˜ã„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«æ§‹é€ ã¸åˆ†å‰²

---

## ğŸ“‹ ç›®æ¬¡

1. [ç¾çŠ¶åˆ†æ](#ç¾çŠ¶åˆ†æ)
2. [åˆ†å‰²æ–¹é‡](#åˆ†å‰²æ–¹é‡)
3. [ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥å®Ÿè£…è¨ˆç”»](#ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥å®Ÿè£…è¨ˆç”»)
4. [è©³ç´°ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ](#è©³ç´°ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ)
5. [ãƒ†ã‚¹ãƒˆæˆ¦ç•¥](#ãƒ†ã‚¹ãƒˆæˆ¦ç•¥)
6. [ãƒªã‚¹ã‚¯ç®¡ç†](#ãƒªã‚¹ã‚¯ç®¡ç†)

---

## ç¾çŠ¶åˆ†æ

### app.pyã®æ§‹æˆï¼ˆ3,086è¡Œï¼‰

| ã‚»ã‚¯ã‚·ãƒ§ãƒ³ | è¡Œæ•° | å†…å®¹ |
|:---|---:|:---|
| ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»åˆæœŸåŒ– | 1-230 | Flaskè¨­å®šã€ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆæœŸåŒ– |
| ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ | 233-270 | 404/500ã‚¨ãƒ©ãƒ¼å‡¦ç† |
| LLMé–¢é€£ | 285-430 | create_gemini_llm, initialize_llm |
| ã‚·ãƒŠãƒªã‚ªç®¡ç† | 432-492 | get_categorized_scenarios |
| åŸºæœ¬ãƒ«ãƒ¼ãƒˆ | 493-535 | health, index, chat |
| ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ˜ãƒ«ãƒ‘ãƒ¼ | 562-645 | initialize_session_historyç­‰ |
| ãƒãƒ£ãƒƒãƒˆAPI | 687-780 | handle_chat, clear_history |
| ã‚·ãƒŠãƒªã‚ªAPI | 785-982 | scenario_chat |
| è¦³æˆ¦ãƒ¢ãƒ¼ãƒ‰API | 984-1147 | start_watch, next_watch_message |
| ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ | 1184-1330 | extract_content, format_*ç­‰ |
| ãƒ¢ãƒ‡ãƒ«ãƒ»ãƒ•ãƒ©ã‚°API | 1340-1420 | api_models, api_feature_flags |
| ã‚·ãƒŠãƒªã‚ªãƒ«ãƒ¼ãƒˆ | 1419-1570 | list_scenarios, show_scenario |
| ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯API | 1685-1925 | scenario_feedback, chat_feedback |
| å­¦ç¿’å±¥æ­´ | 1968-2065 | view_journal |
| é›‘è«‡é–‹å§‹API | 2067-2200 | start_chat |
| TTS API | 2201-2410 | text_to_speechï¼ˆåœæ­¢ä¸­ï¼‰ |
| ç”»åƒç”ŸæˆAPI | 2412-2760 | generate_character_image |
| å¼·ã¿åˆ†æAPI | 2762-2907 | analyze_strengths |
| ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†API | 2910-3025 | session_health, session_info |
| ãƒ¡ã‚¤ãƒ³èµ·å‹• | 3027-3086 | CSRFãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã€èµ·å‹•è¨­å®š |

### æ—¢å­˜ã®åˆ†å‰²æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«

```
services/
â”œâ”€â”€ llm_service.py      âœ… å­˜åœ¨ï¼ˆ261è¡Œï¼‰
â”œâ”€â”€ session_service.py  âœ… å­˜åœ¨ï¼ˆ320è¡Œï¼‰
â”œâ”€â”€ chat_service.py     âœ… å­˜åœ¨ï¼ˆ470è¡Œï¼‰
â””â”€â”€ __init__.py         âœ… å­˜åœ¨

routes/
â””â”€â”€ ab_test_routes.py   âœ… å­˜åœ¨
```

---

## åˆ†å‰²æ–¹é‡

### æœ€çµ‚çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
workplace-roleplay/
â”œâ”€â”€ app.py                    # æœ€å°é™ã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆï¼ˆ~200è¡Œï¼‰
â”œâ”€â”€ routes/                   # Blueprintãƒ™ãƒ¼ã‚¹ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
â”‚   â”œâ”€â”€ __init__.py           # Blueprintç™»éŒ²
â”‚   â”œâ”€â”€ main_routes.py        # ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã€ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
â”‚   â”œâ”€â”€ chat_routes.py        # é›‘è«‡é–¢é€£API
â”‚   â”œâ”€â”€ scenario_routes.py    # ã‚·ãƒŠãƒªã‚ªé–¢é€£API
â”‚   â”œâ”€â”€ watch_routes.py       # è¦³æˆ¦ãƒ¢ãƒ¼ãƒ‰é–¢é€£API
â”‚   â”œâ”€â”€ feedback_routes.py    # ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯é–¢é€£API
â”‚   â”œâ”€â”€ tts_routes.py         # TTSé–¢é€£API
â”‚   â”œâ”€â”€ session_routes.py     # ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†API
â”‚   â”œâ”€â”€ strength_routes.py    # å¼·ã¿åˆ†æAPI
â”‚   â”œâ”€â”€ model_routes.py       # ãƒ¢ãƒ‡ãƒ«ä¸€è¦§API
â”‚   â””â”€â”€ ab_test_routes.py     # æ—¢å­˜ï¼ˆç¶­æŒï¼‰
â”œâ”€â”€ services/                 # ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ __init__.py           # æ—¢å­˜ï¼ˆæ‹¡å¼µï¼‰
â”‚   â”œâ”€â”€ llm_service.py        # æ—¢å­˜ï¼ˆç¶­æŒï¼‰
â”‚   â”œâ”€â”€ session_service.py    # æ—¢å­˜ï¼ˆç¶­æŒï¼‰
â”‚   â”œâ”€â”€ chat_service.py       # æ—¢å­˜ï¼ˆç¶­æŒï¼‰
â”‚   â”œâ”€â”€ scenario_service.py   # æ–°è¦
â”‚   â”œâ”€â”€ watch_service.py      # æ–°è¦
â”‚   â”œâ”€â”€ feedback_service.py   # æ–°è¦
â”‚   â”œâ”€â”€ tts_service.py        # æ–°è¦
â”‚   â””â”€â”€ strength_service.py   # æ–°è¦
â”œâ”€â”€ core/                     # ã‚³ã‚¢æ©Ÿèƒ½
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py             # è¨­å®šç®¡ç†ï¼ˆæ—¢å­˜config/ã‹ã‚‰ç§»å‹•ï¼‰
â”‚   â”œâ”€â”€ extensions.py         # Flaskæ‹¡å¼µã®åˆæœŸåŒ–
â”‚   â”œâ”€â”€ error_handlers.py     # ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
â”‚   â””â”€â”€ middleware.py         # ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ï¼ˆCSRFç­‰ï¼‰
â”œâ”€â”€ utils/                    # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆæ—¢å­˜æ‹¡å¼µï¼‰
â”‚   â”œâ”€â”€ security.py           # æ—¢å­˜ï¼ˆç¶­æŒï¼‰
â”‚   â”œâ”€â”€ redis_manager.py      # æ—¢å­˜ï¼ˆç¶­æŒï¼‰
â”‚   â”œâ”€â”€ prompt_templates.py   # æ–°è¦ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé›†ç´„ï¼‰
â”‚   â””â”€â”€ helpers.py            # æ–°è¦ï¼ˆæ±ç”¨ãƒ˜ãƒ«ãƒ‘ãƒ¼ï¼‰
â””â”€â”€ models/                   # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ï¼ˆå°†æ¥ç”¨ï¼‰
    â”œâ”€â”€ __init__.py
    â””â”€â”€ conversation.py
```

---

## ãƒ•ã‚§ãƒ¼ã‚ºåˆ¥å®Ÿè£…è¨ˆç”»

### âœ… ãƒ•ã‚§ãƒ¼ã‚º1: åŸºç›¤æ•´å‚™ï¼ˆ1-2æ—¥ï¼‰ã€å®Œäº†ã€‘

**ç›®çš„**: åˆ†å‰²ã®ãŸã‚ã®åŸºç›¤ã‚’æ•´å‚™

- [x] **1.1** `core/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
- [x] **1.2** `core/__init__.py` ä½œæˆ
- [x] **1.3** `core/extensions.py` ä½œæˆï¼ˆFlaskæ‹¡å¼µã®åˆæœŸåŒ–ï¼‰
- [x] **1.4** `core/error_handlers.py` ä½œæˆï¼ˆã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ç§»å‹•ï¼‰
- [x] **1.5** `core/middleware.py` ä½œæˆï¼ˆCSRFç­‰ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ï¼‰
- [x] **1.6** `routes/__init__.py` ä½œæˆï¼ˆBlueprintç™»éŒ²ãƒ˜ãƒ«ãƒ‘ãƒ¼ï¼‰
- [x] **1.7** æ—¢å­˜ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆ34ãƒ†ã‚¹ãƒˆé€šéã€æ—¢å­˜ã®å•é¡Œä»¥å¤–ã¯æ­£å¸¸ï¼‰

### âœ… ãƒ•ã‚§ãƒ¼ã‚º2: ãƒ«ãƒ¼ãƒˆåˆ†å‰² - Part 1ï¼ˆ2-3æ—¥ï¼‰ã€å®Œäº†ã€‘

**ç›®çš„**: ä¸»è¦ãªAPIãƒ«ãƒ¼ãƒˆã‚’Blueprintã«åˆ†å‰²

- [x] **2.1** `routes/main_routes.py` ä½œæˆ
  - [x] `health_check()` ç§»å‹•
  - [x] `index()` ç§»å‹•
  - [x] `chat()` ãƒšãƒ¼ã‚¸ãƒ«ãƒ¼ãƒˆç§»å‹•
  - [x] `favicon()` ç§»å‹•
- [x] **2.2** `routes/chat_routes.py` ä½œæˆ
  - [x] `handle_chat()` ç§»å‹•
  - [x] `start_chat()` ç§»å‹•
  - [x] `clear_history()` ç§»å‹•ï¼ˆchatãƒ¢ãƒ¼ãƒ‰ï¼‰
  - [x] `get_chat_feedback()` ç§»å‹•
  - [x] `get_conversation_history()` ç§»å‹•
- [x] **2.3** `routes/scenario_routes.py` ä½œæˆ
  - [x] `list_scenarios()` ç§»å‹•
  - [x] `show_scenario()` ç§»å‹•
  - [x] `scenario_chat()` ç§»å‹•
  - [x] `clear_scenario_history()` ç§»å‹•
  - [x] `get_scenario_feedback()` ç§»å‹•
  - [x] `list_regular_scenarios()` ç§»å‹•
  - [x] `list_harassment_scenarios()` ç§»å‹•
  - [x] `harassment_consent()` ç§»å‹•
  - [x] `get_categorized_scenarios_api()` ç§»å‹•
  - [x] `get_scenario_category()` ç§»å‹•
  - [x] `get_assist()` ç§»å‹•
- [x] **2.4** `utils/helpers.py` ä½œæˆï¼ˆãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’å…ˆè¡Œå®Ÿè£…ï¼‰

### âœ… ãƒ•ã‚§ãƒ¼ã‚º3: ãƒ«ãƒ¼ãƒˆåˆ†å‰² - Part 2ï¼ˆ2-3æ—¥ï¼‰ã€å®Œäº†ã€‘

**ç›®çš„**: æ®‹ã‚Šã®APIãƒ«ãƒ¼ãƒˆã‚’Blueprintã«åˆ†å‰²

- [x] **3.1** `routes/watch_routes.py` ä½œæˆ
  - [x] `watch_mode()` ç§»å‹•
  - [x] `start_watch()` ç§»å‹•
  - [x] `next_watch_message()` ç§»å‹•
  - [x] `generate_next_message()` ãƒ˜ãƒ«ãƒ‘ãƒ¼ç§»å‹•
  - [x] `generate_initial_message()` ãƒ˜ãƒ«ãƒ‘ãƒ¼ç§»å‹•
- [x] **3.2** `routes/model_routes.py` ä½œæˆ
  - [x] `api_models()` ç§»å‹•
  - [x] `api_feature_flags()` ç§»å‹•
  - [x] `get_csrf_token()` ç§»å‹•
  - [x] `get_api_key_status()` ç§»å‹•
- [x] **3.3** `routes/session_routes.py` ä½œæˆ
  - [x] `session_health_check()` ç§»å‹•
  - [x] `session_info()` ç§»å‹•
  - [x] `clear_session_data()` ç§»å‹•
- [x] **3.4** `routes/strength_routes.py` ä½œæˆ
  - [x] `strength_analysis_page()` ç§»å‹•
  - [x] `analyze_strengths()` ç§»å‹•
  - [x] `update_feedback_with_strength_analysis()` ç§»å‹•
- [x] **3.5** `routes/tts_routes.py` ä½œæˆ
  - [x] `text_to_speech()` ç§»å‹•ï¼ˆåœæ­¢ä¸­ï¼‰
  - [x] `get_available_voices()` ç§»å‹•
  - [x] `get_available_styles()` ç§»å‹•
  - [x] `get_voice_for_emotion()` ç§»å‹•
- [x] **3.6** `routes/journal_routes.py` ä½œæˆ
  - [x] `view_journal()` ç§»å‹•
- [x] **3.7** `routes/image_routes.py` ä½œæˆ
  - [x] `generate_character_image()` ç§»å‹•

### âœ… ãƒ•ã‚§ãƒ¼ã‚º4: ã‚µãƒ¼ãƒ“ã‚¹å±¤æ•´å‚™ï¼ˆ2-3æ—¥ï¼‰ã€å®Œäº† - æ—¢å­˜æ´»ç”¨ã€‘

**ç›®çš„**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ã‚µãƒ¼ãƒ“ã‚¹å±¤ã«é›†ç´„

**æ³¨è¨˜**: æ—¢å­˜ã®ã‚µãƒ¼ãƒ“ã‚¹å±¤ï¼ˆ`llm_service.py`, `session_service.py`, `chat_service.py`ï¼‰ã‚’æ´»ç”¨ã€‚
è¿½åŠ ã®ã‚µãƒ¼ãƒ“ã‚¹åˆ†é›¢ã¯ã€ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«æ—¢ã«ãƒ­ã‚¸ãƒƒã‚¯ãŒå«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€å°†æ¥çš„ãªæ”¹å–„ã¨ã—ã¦æ®‹ã™ã€‚

- [x] **4.1** æ—¢å­˜ã‚µãƒ¼ãƒ“ã‚¹ã®ç¢ºèª
  - [x] `services/llm_service.py` - 261è¡Œã€LLMé€£æºãƒ­ã‚¸ãƒƒã‚¯
  - [x] `services/session_service.py` - 320è¡Œã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
  - [x] `services/chat_service.py` - 470è¡Œã€ãƒãƒ£ãƒƒãƒˆãƒ­ã‚¸ãƒƒã‚¯
- [x] **4.2** ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’å«ã‚ã‚‹æ–¹å¼ã‚’æ¡ç”¨
  - [x] ã‚·ãƒŠãƒªã‚ªãƒ­ã‚¸ãƒƒã‚¯ â†’ `routes/scenario_routes.py`
  - [x] è¦³æˆ¦ãƒ­ã‚¸ãƒƒã‚¯ â†’ `routes/watch_routes.py`
  - [x] å¼·ã¿åˆ†æãƒ­ã‚¸ãƒƒã‚¯ â†’ `routes/strength_routes.py`
- [ ] **4.3** å°†æ¥ã®æ”¹å–„ã¨ã—ã¦è¿½åŠ ã‚µãƒ¼ãƒ“ã‚¹åˆ†é›¢ã‚’è¨ˆç”»ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

### âœ… ãƒ•ã‚§ãƒ¼ã‚º5: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£æ•´å‚™ï¼ˆ1-2æ—¥ï¼‰ã€å®Œäº† - ãƒ•ã‚§ãƒ¼ã‚º2ã§å…ˆè¡Œå®Ÿè£…ã€‘

**ç›®çš„**: å…±é€šæ©Ÿèƒ½ã‚’ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã«é›†ç´„

- [x] **5.1** `utils/helpers.py` ä½œæˆï¼ˆãƒ•ã‚§ãƒ¼ã‚º2ã§å…ˆè¡Œå®Ÿè£…ï¼‰
  - [x] `extract_content()` ç§»å‹•
  - [x] `format_conversation_history()` ç§»å‹•
  - [x] `format_conversation_history_for_feedback()` ç§»å‹•
  - [x] `get_partner_description()` ç§»å‹•
  - [x] `get_situation_description()` ç§»å‹•
  - [x] `get_topic_description()` ç§»å‹•
  - [x] `add_messages_from_history()` ç§»å‹•
  - [x] ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ç¾¤
- [x] **5.2** ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ãƒ«ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å†…ã§ç®¡ç†
- [x] **5.3** å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ã®å‚ç…§æ›´æ–°å®Œäº†

### âœ… ãƒ•ã‚§ãƒ¼ã‚º6: app.pyæœ€çµ‚æ•´ç†ï¼ˆ1æ—¥ï¼‰ã€å®Œäº†ã€‘

**ç›®çš„**: app.pyã‚’æœ€å°é™ã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã«

- [x] **6.1** ä¸è¦ãªã‚¤ãƒ³ãƒãƒ¼ãƒˆå‰Šé™¤
- [x] **6.2** Blueprintç™»éŒ²ã®é›†ç´„ï¼ˆ`routes/__init__.py`ã§ä¸€å…ƒç®¡ç†ï¼‰
- [x] **6.3** åˆæœŸåŒ–å‡¦ç†ã®æ•´ç†ï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ‘ã‚¿ãƒ¼ãƒ³æ¡ç”¨ï¼‰
- [x] **6.4** app.pyã®è¡Œæ•°å‰Šæ¸›
  - **çµæœ**: 3,085è¡Œ â†’ 336è¡Œï¼ˆ89%å‰Šæ¸›ï¼‰
  - **æ³¨è¨˜**: ç›®æ¨™200è¡Œã‚’è¶…ãˆã¦ã„ã‚‹ã®ã¯å¾Œæ–¹äº’æ›æ€§ã®ãŸã‚ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆåˆ¥åï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã®äº’æ›æ€§ï¼‰ã‚’å«ã‚€ãŸã‚
- [x] **6.5** ä¸»è¦ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®å‹•ä½œç¢ºèª
  - Health Check: âœ… 200
  - Home Page: âœ… 200
  - Chat Page: âœ… 200
  - Watch Page: âœ… 200
  - Scenarios List: âœ… 200
  - Regular Scenarios: âœ… 200
  - Scenario Detail: âœ… 200
  - Journal: âœ… 403ï¼ˆfeature flagsã§åˆ¶å¾¡ã€æ­£å¸¸å‹•ä½œï¼‰
- [ ] **6.6** æœ¬ç•ªç’°å¢ƒã§ã®å‹•ä½œç¢ºèªï¼ˆãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã«å®Ÿæ–½ï¼‰

---

## è©³ç´°ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Phase 1: åŸºç›¤æ•´å‚™

#### 1.1 core/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
- [ ] `mkdir -p core` å®Ÿè¡Œ
- [ ] ç©ºã®`__init__.py`ä½œæˆ

#### 1.2 core/extensions.py
```python
# ä½œæˆã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¦‚è¦
- Flask-SessionåˆæœŸåŒ–
- RedisåˆæœŸåŒ–
- ãã®ä»–æ‹¡å¼µã®åˆæœŸåŒ–
```
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] Flask-SessionåˆæœŸåŒ–ã‚³ãƒ¼ãƒ‰ç§»å‹•
- [ ] RedisåˆæœŸåŒ–ã‚³ãƒ¼ãƒ‰ç§»å‹•
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

#### 1.3 core/error_handlers.py
```python
# ç§»å‹•å¯¾è±¡ï¼ˆapp.py 233-270è¡Œï¼‰
- handle_app_error()
- handle_validation_error()
- handle_not_found()
- handle_internal_error()
- handle_unexpected_error()
```
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] 5ã¤ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ç§»å‹•
- [ ] app.pyã§ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ç™»éŒ²
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

#### 1.4 core/middleware.py
```python
# ç§»å‹•å¯¾è±¡ï¼ˆapp.py 3027-3069è¡Œï¼‰
- csrf_middleware()
- CSRF_PROTECTED_ENDPOINTS
```
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] CSRFãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ç§»å‹•
- [ ] ä¿è­·å¯¾è±¡ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãƒªã‚¹ãƒˆç§»å‹•
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

#### 1.5 routes/__init__.py
```python
# ä½œæˆå†…å®¹
- register_blueprints()é–¢æ•°
- å…¨Blueprintã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
```
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] Blueprintç™»éŒ²é–¢æ•°ä½œæˆ
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

### Phase 2: ãƒ«ãƒ¼ãƒˆåˆ†å‰² Part 1

#### 2.1 routes/main_routes.py
```python
# Blueprint: main_bp
# URL prefix: ãªã—
```

| ãƒ«ãƒ¼ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | ç§»å‹•å…ƒè¡Œæ•° |
|:---|:---|---:|
| `/health` | GET | 494-508 |
| `/` | GET | 510-522 |
| `/chat` | GET | 524-534 |
| `/favicon.ico` | GET | 1327-1338 |

- [ ] Blueprintä½œæˆ
- [ ] `health_check()` ç§»å‹•
- [ ] `index()` ç§»å‹•
- [ ] `chat()` ç§»å‹•
- [ ] `favicon()` ç§»å‹•
- [ ] app.pyã§Blueprintç™»éŒ²
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

#### 2.2 routes/chat_routes.py
```python
# Blueprint: chat_bp
# URL prefix: /api
```

| ãƒ«ãƒ¼ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | ç§»å‹•å…ƒè¡Œæ•° |
|:---|:---|---:|
| `/api/chat` | POST | 687-734 |
| `/api/start_chat` | POST | 2068-2154 |
| `/api/clear_history` | POST | 736-783 |
| `/api/chat_feedback` | POST | 1832-1924 |

- [ ] Blueprintä½œæˆ
- [ ] `handle_chat()` ç§»å‹•
- [ ] `start_chat()` ç§»å‹•
- [ ] `clear_history()` ç§»å‹•
- [ ] `get_chat_feedback()` ç§»å‹•
- [ ] app.pyã§Blueprintç™»éŒ²
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

#### 2.3 routes/scenario_routes.py
```python
# Blueprint: scenario_bp
# URL prefix: ãªã—ï¼ˆæ··åœ¨ã™ã‚‹ãŸã‚ï¼‰
```

| ãƒ«ãƒ¼ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | ç§»å‹•å…ƒè¡Œæ•° |
|:---|:---|---:|
| `/scenarios` | GET | 1419-1431 |
| `/scenario/<id>` | GET | 1433-1471 |
| `/api/scenario_chat` | POST | 785-954 |
| `/api/scenario_clear` | POST | 956-982 |
| `/api/scenario_feedback` | POST | 1685-1828 |
| `/scenarios/regular` | GET | 1482-1497 |
| `/scenarios/harassment` | GET | 1500-1525 |
| `/harassment/consent` | GET/POST | 1528-1552 |
| `/api/categorized_scenarios` | GET | 1473-1479 |
| `/api/scenario/<id>/category` | GET | 1554-1569 |

- [ ] Blueprintä½œæˆ
- [ ] 10ãƒ«ãƒ¼ãƒˆç§»å‹•
- [ ] ã‚·ãƒŠãƒªã‚ªé–¢é€£ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ç§»å‹•
- [ ] app.pyã§Blueprintç™»éŒ²
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

### Phase 3: ãƒ«ãƒ¼ãƒˆåˆ†å‰² Part 2

#### 3.1 routes/watch_routes.py
```python
# Blueprint: watch_bp
# URL prefix: /api/watchï¼ˆAPIï¼‰ã€ãªã—ï¼ˆãƒšãƒ¼ã‚¸ï¼‰
```

| ãƒ«ãƒ¼ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | ç§»å‹•å…ƒè¡Œæ•° |
|:---|:---|---:|
| `/watch` | GET | 1961-1965 |
| `/api/watch/start` | POST | 984-1049 |
| `/api/watch/next` | POST | 1051-1107 |

- [ ] Blueprintä½œæˆ
- [ ] `watch_mode()` ç§»å‹•
- [ ] `start_watch()` ç§»å‹•
- [ ] `next_watch_message()` ç§»å‹•
- [ ] `generate_next_message()` ç§»å‹•
- [ ] `generate_initial_message()` ç§»å‹•
- [ ] app.pyã§Blueprintç™»éŒ²
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

#### 3.2 routes/model_routes.py
```python
# Blueprint: model_bp
# URL prefix: /api
```

| ãƒ«ãƒ¼ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | ç§»å‹•å…ƒè¡Œæ•° |
|:---|:---|---:|
| `/api/models` | GET | 1383-1400 |
| `/api/feature_flags` | GET | 1340-1351, 1403-1417 |
| `/api/csrf-token` | GET | 1353-1381 |

- [ ] Blueprintä½œæˆ
- [ ] `api_models()` ç§»å‹•
- [ ] `api_feature_flags()` ç§»å‹•ï¼ˆé‡è¤‡è§£æ¶ˆï¼‰
- [ ] `get_csrf_token()` ç§»å‹•
- [ ] app.pyã§Blueprintç™»éŒ²
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

#### 3.3 routes/session_routes.py
```python
# Blueprint: session_bp
# URL prefix: /api/session
```

| ãƒ«ãƒ¼ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | ç§»å‹•å…ƒè¡Œæ•° |
|:---|:---|---:|
| `/api/session/health` | GET | 2922-2957 |
| `/api/session/info` | GET | 2960-2988 |
| `/api/session/clear` | POST | 2991-3024 |
| `/api/conversation_history` | POST | 2156-2199 |

- [ ] Blueprintä½œæˆ
- [ ] 4ãƒ«ãƒ¼ãƒˆç§»å‹•
- [ ] app.pyã§Blueprintç™»éŒ²
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

#### 3.4 routes/strength_routes.py
```python
# Blueprint: strength_bp
# URL prefix: ãªã—
```

| ãƒ«ãƒ¼ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | ç§»å‹•å…ƒè¡Œæ•° |
|:---|:---|---:|
| `/strength_analysis` | GET | 2763-2772 |
| `/api/strength_analysis` | POST | 2775-2870 |

- [ ] Blueprintä½œæˆ
- [ ] `strength_analysis_page()` ç§»å‹•
- [ ] `analyze_strengths()` ç§»å‹•
- [ ] `update_feedback_with_strength_analysis()` ç§»å‹•
- [ ] app.pyã§Blueprintç™»éŒ²
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

#### 3.5 routes/tts_routes.py
```python
# Blueprint: tts_bp
# URL prefix: /api/tts
```

| ãƒ«ãƒ¼ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | ç§»å‹•å…ƒè¡Œæ•° |
|:---|:---|---:|
| `/api/tts` | POST/HEAD | 2201-2389 |
| `/api/tts/voices` | GET | 2651-2716 |
| `/api/tts/styles` | GET | 2718-2759 |

- [ ] Blueprintä½œæˆ
- [ ] `text_to_speech()` ç§»å‹•ï¼ˆåœæ­¢ä¸­ã‚³ãƒ¼ãƒ‰å«ã‚€ï¼‰
- [ ] `get_available_voices()` ç§»å‹•
- [ ] `get_available_styles()` ç§»å‹•
- [ ] `get_voice_for_emotion()` ç§»å‹•
- [ ] app.pyã§Blueprintç™»éŒ²
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

### Phase 4: ã‚µãƒ¼ãƒ“ã‚¹å±¤æ•´å‚™

#### 4.1 services/scenario_service.py
```python
# ç§»å‹•å¯¾è±¡
- ã‚·ãƒŠãƒªã‚ªå–å¾—ãƒ»åˆ†é¡ãƒ­ã‚¸ãƒƒã‚¯
- ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ
```

| é–¢æ•° | ç§»å‹•å…ƒè¡Œæ•° |
|:---|---:|
| `get_categorized_scenarios()` | 441-475 |
| `get_scenario_category_summary()` | 477-491 |
| ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ | 843-890 |

- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] ã‚·ãƒŠãƒªã‚ªåˆ†é¡ãƒ­ã‚¸ãƒƒã‚¯ç§»å‹•
- [ ] ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ç§»å‹•
- [ ] æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã®å‚ç…§æ›´æ–°
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

#### 4.2 services/watch_service.py
```python
# ç§»å‹•å¯¾è±¡
- è¦³æˆ¦ãƒ¢ãƒ¼ãƒ‰ã®ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
```

| é–¢æ•° | ç§»å‹•å…ƒè¡Œæ•° |
|:---|---:|
| `generate_initial_message()` | 1926-1958 |
| `generate_next_message()` | 1109-1146 |
| è©±è€…åˆ‡æ›¿ãƒ­ã‚¸ãƒƒã‚¯ | 1064-1068 |

- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ç§»å‹•
- [ ] è©±è€…ç®¡ç†ãƒ­ã‚¸ãƒƒã‚¯ç§»å‹•
- [ ] æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã®å‚ç…§æ›´æ–°
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

#### 4.3 services/feedback_service.py
```python
# ç§»å‹•å¯¾è±¡
- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯
```

| é–¢æ•° | ç§»å‹•å…ƒè¡Œæ•° |
|:---|---:|
| `try_multiple_models_for_prompt()` | 1571-1661 |
| ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ | 1723-1768, 1851-1878 |

- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] ãƒ¢ãƒ‡ãƒ«è©¦è¡Œãƒ­ã‚¸ãƒƒã‚¯ç§»å‹•
- [ ] ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ç§»å‹•
- [ ] æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã®å‚ç…§æ›´æ–°
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

#### 4.4 services/tts_service.py
```python
# ç§»å‹•å¯¾è±¡ï¼ˆåœæ­¢ä¸­ã ãŒæ§‹é€ åŒ–ï¼‰
- TTSé–¢é€£ãƒ­ã‚¸ãƒƒã‚¯
```

| é–¢æ•° | ç§»å‹•å…ƒè¡Œæ•° |
|:---|---:|
| `get_voice_for_emotion()` | 2394-2410 |
| TTSç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ | 2229-2389 |

- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] éŸ³å£°é¸æŠãƒ­ã‚¸ãƒƒã‚¯ç§»å‹•
- [ ] TTSç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯ç§»å‹•ï¼ˆåœæ­¢ä¸­ï¼‰
- [ ] æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã®å‚ç…§æ›´æ–°
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

#### 4.5 services/strength_service.py
```python
# ç§»å‹•å¯¾è±¡
- å¼·ã¿åˆ†æãƒ­ã‚¸ãƒƒã‚¯
```

| é–¢æ•° | ç§»å‹•å…ƒè¡Œæ•° |
|:---|---:|
| `update_feedback_with_strength_analysis()` | 2880-2907 |
| åˆ†æãƒ­ã‚¸ãƒƒã‚¯ | 2822-2869 |

- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] å¼·ã¿åˆ†æãƒ­ã‚¸ãƒƒã‚¯ç§»å‹•
- [ ] åŠ±ã¾ã—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç”Ÿæˆç§»å‹•
- [ ] æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã®å‚ç…§æ›´æ–°
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

### Phase 5: ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£æ•´å‚™

#### 5.1 utils/prompt_templates.py
```python
# ç§»å‹•å¯¾è±¡
- å„ç¨®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
```

- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] é›‘è«‡ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç§»å‹•
- [ ] ã‚·ãƒŠãƒªã‚ªã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç§»å‹•
- [ ] è¦³æˆ¦ãƒ¢ãƒ¼ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç§»å‹•
- [ ] ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç§»å‹•
- [ ] æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã®å‚ç…§æ›´æ–°
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

#### 5.2 utils/helpers.py
```python
# ç§»å‹•å¯¾è±¡
- æ±ç”¨ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
```

| é–¢æ•° | ç§»å‹•å…ƒè¡Œæ•° |
|:---|---:|
| `extract_content()` | 1184-1208 |
| `format_conversation_history()` | 1226-1233 |
| `format_conversation_history_for_feedback()` | 1235-1246 |
| `get_partner_description()` | 1248-1258 |
| `get_situation_description()` | 1260-1270 |
| `get_topic_description()` | 1272-1282 |
| `add_messages_from_history()` | 1664-1682 |
| `get_all_available_models()` | 1284-1323 |

- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [ ] 8é–¢æ•°ç§»å‹•
- [ ] æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã®å‚ç…§æ›´æ–°
- [ ] ãƒ†ã‚¹ãƒˆç¢ºèª

### Phase 6: app.pyæœ€çµ‚æ•´ç†

#### 6.1 æœ€çµ‚çš„ãªapp.pyã®æ§‹é€ 
```python
"""
workplace-roleplay ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
"""
from flask import Flask
from core.extensions import init_extensions
from core.error_handlers import register_error_handlers
from core.middleware import register_middleware
from routes import register_blueprints
from config import get_cached_config

def create_app(config=None):
    """ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¯ãƒˆãƒª"""
    app = Flask(__name__)
    
    # è¨­å®šã®èª­ã¿è¾¼ã¿
    config = config or get_cached_config()
    app.config.from_object(config)
    
    # æ‹¡å¼µã®åˆæœŸåŒ–
    init_extensions(app)
    
    # ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ç™»éŒ²
    register_error_handlers(app)
    
    # ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ç™»éŒ²
    register_middleware(app)
    
    # Blueprintç™»éŒ²
    register_blueprints(app)
    
    return app

# ãƒ¡ã‚¤ãƒ³èµ·å‹•
if __name__ == "__main__":
    app = create_app()
    config = get_cached_config()
    app.run(
        debug=config.DEBUG,
        host=config.HOST,
        port=config.PORT,
        use_reloader=config.HOT_RELOAD
    )
```

- [ ] ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ‘ã‚¿ãƒ¼ãƒ³ã«ç§»è¡Œ
- [ ] ä¸è¦ãªã‚¤ãƒ³ãƒãƒ¼ãƒˆå‰Šé™¤
- [ ] ä¸è¦ãªã‚³ãƒ¼ãƒ‰å‰Šé™¤
- [ ] 200è¡Œä»¥ä¸‹ã«ãªã‚‹ã“ã¨ã‚’ç¢ºèª

#### 6.2 æœ€çµ‚ç¢ºèª
- [ ] å…¨ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- [ ] å…¨çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
- [ ] æ‰‹å‹•å‹•ä½œç¢ºèªï¼ˆå„ãƒ¢ãƒ¼ãƒ‰ï¼‰
- [ ] æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤ãƒ†ã‚¹ãƒˆ

---

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### å„ãƒ•ã‚§ãƒ¼ã‚ºã§ã®ãƒ†ã‚¹ãƒˆ

```bash
# æ—¢å­˜ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
pytest tests/ -v

# ç‰¹å®šãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ†ã‚¹ãƒˆ
pytest tests/test_app_integration.py -v
pytest tests/test_xss.py -v
pytest tests/security/ -v
```

### å›å¸°ãƒ†ã‚¹ãƒˆé …ç›®

- [ ] ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ (`/health`)
- [ ] ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ (`/`)
- [ ] é›‘è«‡ãƒ¢ãƒ¼ãƒ‰ (`/chat`, `/api/chat`, `/api/start_chat`)
- [ ] ã‚·ãƒŠãƒªã‚ªãƒ¢ãƒ¼ãƒ‰ (`/scenarios`, `/scenario/<id>`, `/api/scenario_chat`)
- [ ] è¦³æˆ¦ãƒ¢ãƒ¼ãƒ‰ (`/watch`, `/api/watch/*`)
- [ ] ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ (`/api/scenario_feedback`, `/api/chat_feedback`)
- [ ] TTS API (`/api/tts` - åœæ­¢ä¸­ç¢ºèª)
- [ ] å¼·ã¿åˆ†æ (`/strength_analysis`, `/api/strength_analysis`)
- [ ] ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç† (`/api/session/*`)
- [ ] ãƒ¢ãƒ‡ãƒ«ä¸€è¦§ (`/api/models`)
- [ ] æ©Ÿèƒ½ãƒ•ãƒ©ã‚° (`/api/feature_flags`)
- [ ] CSRFãƒˆãƒ¼ã‚¯ãƒ³ (`/api/csrf-token`)

---

## ãƒªã‚¹ã‚¯ç®¡ç†

### æƒ³å®šãƒªã‚¹ã‚¯ã¨å¯¾ç­–

| ãƒªã‚¹ã‚¯ | å½±éŸ¿åº¦ | å¯¾ç­– |
|:---|:---|:---|
| ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼ | é«˜ | å„ãƒ•ã‚§ãƒ¼ã‚ºã§å³åº§ã«ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ |
| ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®ç ´æ | é«˜ | ã‚»ãƒƒã‚·ãƒ§ãƒ³é–¢é€£ã®ãƒ†ã‚¹ãƒˆã‚’é‡ç‚¹çš„ã« |
| CSRFä¿è­·ã®æ¼ã‚Œ | é«˜ | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆã®ç¶™ç¶šå®Ÿè¡Œ |
| ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®ä¸æ•´åˆ | ä¸­ | URL prefix ã®æ…é‡ãªè¨­è¨ˆ |
| å¾ªç’°å‚ç…§ | ä¸­ | ä¾å­˜é–¢ä¿‚ã®æ˜ç¢ºåŒ– |

### ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ‰‹é †

1. å„ãƒ•ã‚§ãƒ¼ã‚ºé–‹å§‹å‰ã«ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
2. å•é¡Œç™ºç”Ÿæ™‚ã¯å³åº§ã«`git revert`
3. æœ¬ç•ªç’°å¢ƒã¸ã®å½±éŸ¿ã‚’æœ€å°åŒ–

### æˆåŠŸæŒ‡æ¨™

- [ ] app.pyãŒ200è¡Œä»¥ä¸‹
- [ ] å…¨ãƒ†ã‚¹ãƒˆï¼ˆ189ä»¶ï¼‰ãŒé€šé
- [ ] æ©Ÿèƒ½ã®æ¬ è½ãªã—
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ–ãªã—
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ°´æº–ç¶­æŒ

---

## é€²æ—ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°

### å…¨ä½“é€²æ—

```
ãƒ•ã‚§ãƒ¼ã‚º1: [          ] 0%  - åŸºç›¤æ•´å‚™
ãƒ•ã‚§ãƒ¼ã‚º2: [          ] 0%  - ãƒ«ãƒ¼ãƒˆåˆ†å‰² Part 1
ãƒ•ã‚§ãƒ¼ã‚º3: [          ] 0%  - ãƒ«ãƒ¼ãƒˆåˆ†å‰² Part 2
ãƒ•ã‚§ãƒ¼ã‚º4: [          ] 0%  - ã‚µãƒ¼ãƒ“ã‚¹å±¤æ•´å‚™
ãƒ•ã‚§ãƒ¼ã‚º5: [          ] 0%  - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£æ•´å‚™
ãƒ•ã‚§ãƒ¼ã‚º6: [          ] 0%  - app.pyæœ€çµ‚æ•´ç†
```

### äºˆæƒ³æ‰€è¦æ™‚é–“

| ãƒ•ã‚§ãƒ¼ã‚º | äºˆæƒ³æ™‚é–“ |
|:---|---:|
| ãƒ•ã‚§ãƒ¼ã‚º1 | 1-2æ—¥ |
| ãƒ•ã‚§ãƒ¼ã‚º2 | 2-3æ—¥ |
| ãƒ•ã‚§ãƒ¼ã‚º3 | 2-3æ—¥ |
| ãƒ•ã‚§ãƒ¼ã‚º4 | 2-3æ—¥ |
| ãƒ•ã‚§ãƒ¼ã‚º5 | 1-2æ—¥ |
| ãƒ•ã‚§ãƒ¼ã‚º6 | 1æ—¥ |
| **åˆè¨ˆ** | **9-14æ—¥** |

---

**ä½œæˆè€…**: AI Assistant  
**æœ€çµ‚æ›´æ–°**: 2025å¹´11æœˆ26æ—¥  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: è¨ˆç”»æ®µéš
